<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="description" content="Brett Schwarz's Neighborhood Map"><meta name="author" content="Brett Schwarz"><title>Neighborhood Map</title><link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet"><style>body,html{font-family:Verdana,sans-serif;height:100%;margin:0;padding:0}body,html,input{font-size:11pt}h2{color:#369;font-size:18pt;text-align:center}hr{border:0;height:2px;background:#369;background-image:linear-gradient(to right,#9cf,#369,#9cf)}#map{bottom:0;height:100%;width:100%;left:50px;position:absolute;right:0;z-index:1}.listing-box{background:#fff;height:100%;line-height:35px;padding:1px;text-align:left;transform:translate3d(0,0,0);transition:transform .2s;min-width:200px}#search-within-neighborhood{width:75%}@media screen and (max-width:400px){.listbtn{font-size:10pt}}</style><script src="js/jquery-3.3.1.min.js"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script><script type="text/html" id="locationList-template"><div class="card">
        <div class="card-header" data-bind="attr: { id: heading}">
          <h5 class="mb-0">
          <button class="btn btn-link listbtn" data-toggle="collapse" data-bind="text: title, attr: { 'data-target': '#'+collapse, 'aria-controls': collapse}, click: $root.popup" aria-expanded="true">
          </button>
          </h5>
        </div>

        <div data-bind="attr: { id: collapse, 'aria-labelledby': heading}" class="collapse" data-parent="#accordion">
          <div class="card-body" data-bind="text: description">
          </div>
        </div>
      </div></script></head><body><div class="container-fluid h-100" id="wrapper">https://www.w3schools.com/howto/howto_js_sidenav.asp)<div class="row h-100"><aside id="listview" class="listing-box collapse float-left col-3 h-100"><h2>Neighborhood Map</h2><hr><div><input id="search-within-neighborhood" type="text" placeholder="text to filter results" data-bind="textInput: searchNeighborhood, valueUpdate: 'keydown'"> <input id="search-go" type="button" value="Filter"></div><div data-bind="foreach: locationListFiltered"><div id="accordion" data-bind="template: { name: 'locationList-template'}"></div></div><hr></aside><div class="col"><a href class="float-left navbar-light m-1" data-target="#listview" data-toggle="collapse"><span class="navbar-toggler-icon"></span></a><section class="content"><div id="map"></div></section></div></div></div><script>var locations=[{title:"The Nest",location:{lat:47.610722,lng:-122.341404},type:"bar",description:"Great View of the waterfront while enjoying drinks"},{title:"Seattle Gum Wall",location:{lat:47.608425,lng:-122.340365},type:"attraction",description:"Wall with chewing gum stuck all over it. An unofficial Seattle landmark"},{title:"Pike Place Market",location:{lat:47.608599,lng:-122.340704},type:"attraction",description:"Market with fresh food and famous for the fish tossing"},{title:"Pike Brewing Company",location:{lat:47.608232,lng:-122.339743},type:"bar",description:"One of many local breweries in Seattle"},{title:"The Showbox",location:{lat:47.608556,lng:-122.339327},type:"entertainment",description:"Great place to watch live music shows"},{title:"Hard Rock Cafe Seattle",location:{lat:47.609224,lng:-122.339479},type:"restaurant",description:"Chain restaurant with memorabilia from music industry"},{title:"Alibi Room",location:{lat:47.608255,lng:-122.340411},type:"restaurant",description:"Restaurant that has movie scripts that customers can read. Started by actor Tom Skerritt"},{title:"The Pink Door",location:{lat:47.610365,lng:-122.34256},type:"restaurant",description:"Trapeze and burlesque shows while eating."},{title:"First Starbucks",location:{lat:47.61009,lng:-122.34247},type:"coffee",description:"First Starbucks Coffee shop"},{title:"Athenian",location:{lat:47.608717,lng:-122.341034},type:"restaurant",description:"Restaurant made famous by the film Sleepless in Seattle"}]</script><script>var map,infowindow="",markers=[],locstart={lat:47.609,lng:-122.34},fsBaseUrl="https://api.foursquare.com/v2/venues/search",foursquare={client_id:"EEVVE4BBS22Q3EHRZL33XVFZZTR51RZTZDIZXDDRVYPRPR4Y",client_secret:"25D03XWWJAVIJNYLJGJX3EH13HUUX3GJPM3WAVB1G30DOOVK",limit:"1",v:"20180323",ll:locstart.lat+","+locstart.lng,query:""};function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:locstart.lat,lng:locstart.lng},zoom:18,mapTypeId:"roadmap",mapTypeControl:!1}),infowindow=new google.maps.InfoWindow;for(var o="images/red_pin.png",e=0,t=locations.length;e<t;e++){var n=new google.maps.Marker({position:locations[e].location,title:locations[e].title,animation:google.maps.Animation.DROP,icon:o,id:e});markers.push(n),n.addListener("click",function(){animateMarker(this),populateInfoWindow(this,infowindow)}),n.addListener("mouseover",function(){this.setIcon("images/red_pin_bright.png")}),n.addListener("mouseout",function(){this.setIcon(o)})}showLocations()}function mapError(){alert("There was a problem loading the map")}function animateMarker(o){o.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){o.setAnimation(null)}.bind(self),2100)}function populateInfoWindow(o,a){a.marker!=o&&(a.setContent(""),a.marker=o,a.addListener("closeclick",function(){a.marker=null}),foursquare.query=o.title,$.getJSON(fsBaseUrl,foursquare).done(function(o){var e=o.response.venues[0],t="";e.contact.phone&&(t='<a href="tel:+1'+e.contact.phone+'">'+e.contact.formattedPhone+"</a>");var n="";e.url&&(n="<a href="+e.url+'">'+e.url+"</a>"),a.setContent("<h4>"+e.name+"</h4><h6>("+e.categories.map(function(o){return o.shortName}).join(",")+")</h6><address>"+e.location.formattedAddress.join("<br>")+"</address><br>"+t+"<br>"+n+'<footer>Powered by <a href="https://developer.foursquare.com">Foursquare</a></footer>')}).fail(function(o,e,t){alert("Something went wrong with the foursquare API, please try again: "+t)}),a.open(map,o))}function showLocations(){var e=new google.maps.LatLngBounds;markers.forEach(function(o){o.setMap(map),e.extend(o.position)}),map.fitBounds(e)}function markersSet(e){markers.forEach(function(o){o.setVisible(e)})}var Location=function(o,e){var t=this;t.title=ko.observable(o.title),t.description=o.description,t.location=o.location,t.type=o.type,t.index=e,t.heading="heading"+e,t.collapse="collapse"+e};function listViewModel(){var n=this;n.locationList=ko.observableArray([]),n.searchNeighborhood=ko.observable("");for(var o=0,e=locations.length;o<e;o++){var t=new Location(locations[o],o);n.locationList.push(t)}n.popup=function(o){animateMarker(markers[o.index]),populateInfoWindow(markers[o.index],infowindow)},n.locationListFiltered=ko.computed(function(){if(markersSet(!1),!n.searchNeighborhood())return markersSet(!0),n.locationList();var e=[],t=0;return ko.utils.arrayForEach(n.locationList(),function(o){0===o.title().search(new RegExp(n.searchNeighborhood(),"i"))&&(e.push(o),markers[t].setVisible(!0)),t++}),e},this)}var listView={viewModel:new listViewModel};ko.applyBindings(listView.viewModel)</script><script async defer="defer" src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyB6ooU3VulJ7rPMTm7pQq2NXjX6SRnfSzU&v=3&callback=initMap" onerror="mapError()"></script></body></html>